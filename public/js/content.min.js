function shuffle(e){e.sort((()=>Math.random()-.5))}document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll("select");M.FormSelect.init(e,{})})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal"),n=M.Modal.init(e,{dismissible:!1});window.resModal=n[0]})),function(){let e=[],n=null,t=1,o=[],l=null,d=null;fetch("/data.json").then((e=>e.json())).then((n=>e=n.items));const s=()=>{d&&(d.stop(),d=null),l&&clearTimeout(l)},i=e=>{s(),d=new Howl({src:[e.sound],autoplay:!0,loop:!1,volume:1,onend:()=>{s()}}),l=setTimeout((()=>{s()}),6e3)};window.onChangeLevel=()=>{document.getElementById("actions").classList.remove("running"),t=parseInt(document.getElementById("level").value,10)},window.start=()=>{o=[],document.getElementById("actions").classList.add("running"),window.next()},window.again=()=>{i(n)},window.found=()=>{document.getElementById("response").innerHTML=n.frLabel,document.getElementById("img-response").setAttribute("src",n.image),resModal.open()},window.next=()=>{shuffle(e),playedLabels=o.map((e=>e.frLabel));const l=e.filter((e=>e.level===t)).filter((e=>-1===playedLabels.indexOf(e.frLabel)));l.length?(n=l[0],i(n),o.push({...n})):(alert("Partie terminée"),window.stop(!0))},window.stop=e=>{(e||confirm("Voulez-vous arrêter la partie en cours ?"))&&(s(),document.getElementById("actions").classList.remove("running"))}}();
